<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focaccia Bread Recipe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        
        .recipe-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .info-item {
            text-align: center;
            opacity: 0.9;
        }
        
        .info-item strong {
            display: block;
            font-size: 1.2em;
            margin-bottom: 5px;
        }
        
        .content {
            padding: 40px 30px;
        }
        
        .scaling-controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .scaling-controls h3 {
            margin-bottom: 15px;
            color: #495057;
        }
        
        .scale-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .scale-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .scale-btn.active {
            background: #667eea;
            color: white;
        }
        
        .scale-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .yeast-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .slider-container {
            margin-top: 15px;
        }
        
        .slider {
            width: 100%;
            max-width: 300px;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }
        
        .scale-display {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
            margin-top: 10px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #495057;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .ingredients-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .ingredients-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 500;
        }
        
        .ingredients-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .ingredients-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .ingredients-table tr:hover {
            background: #e3f2fd;
            transition: background 0.3s ease;
        }
        
        .weight {
            font-weight: bold;
            color: #667eea;
        }
        
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .equipment-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .equipment-card h4 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .steps {
            counter-reset: step-counter;
        }
        
        .step {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            counter-increment: step-counter;
            position: relative;
        }
        
        .step::before {
            content: counter(step-counter);
            position: absolute;
            left: -15px;
            top: 20px;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .step h3 {
            color: #495057;
            margin-bottom: 15px;
            margin-left: 20px;
        }
        
        .step-content {
            margin-left: 20px;
        }
        
        .step-content ol {
            padding-left: 20px;
        }
        
        .step-content li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .temperature {
            font-weight: bold;
            color: #e74c3c;
        }
        
        .toppings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .topping-item {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #667eea;
        }
        
        .topping-item strong {
            display: block;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .tips-list {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }
        
        .tips-list h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .tips-list ul {
            list-style-type: none;
            padding: 0;
        }
        
        .tips-list li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }
        
        .tips-list li::before {
            content: "üí°";
            position: absolute;
            left: 0;
        }
        
        .troubleshooting {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .troubleshooting h4 {
            color: #721c24;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .problem {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 5px;
        }
        
        .problem strong {
            color: #721c24;
        }
        
        @media (max-width: 600px) {
            .container {
                margin: 10px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .recipe-info {
                gap: 15px;
            }
            
            .scale-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .ingredients-table {
                font-size: 0.9em;
            }
            
            .ingredients-table th,
            .ingredients-table td {
                padding: 10px 8px;
            }
            
            .equipment-grid {
                grid-template-columns: 1fr;
            }
            
            .toppings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçû Focaccia Bread Recipe</h1>
            <p>Traditional Italian flatbread with baker's percentages</p>
            <div class="recipe-info">
                <div class="info-item">
                    <strong>Serves</strong>
                    <span id="yield">8-10 pieces</span>
                </div>
                <div class="info-item">
                    <strong>Active Time</strong>
                    <span>30 minutes</span>
                </div>
                <div class="info-item">
                    <strong>Total Time</strong>
                    <span id="total-time">15-18 hours</span>
                </div>
                <div class="info-item">
                    <strong>Pan Size</strong>
                    <span id="panSize">9x13 inch (23x33 cm)</span>
                </div>
            </div>
        </div>
        
        <div class="content">
            <div class="yeast-selection" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; text-align: center; border: 2px solid #e9ecef;">
                <h3 style="margin-bottom: 15px; color: #495057;">Choose Your Leavening Method</h3>
                <div class="yeast-buttons" style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button class="yeast-btn active" id="commercial-yeast-btn" onclick="setYeastType('commercial')" style="padding: 12px 24px; border: 2px solid #667eea; background: #667eea; color: white; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; font-weight: 500; font-size: 1.1em;">
                        üß™ Commercial Yeast
                    </button>
                    <button class="yeast-btn" id="sourdough-btn" onclick="setYeastType('sourdough')" style="padding: 12px 24px; border: 2px solid #4caf50; background: white; color: #4caf50; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; font-weight: 500; font-size: 1.1em;">
                        ü•ñ Sourdough Starter
                    </button>
                </div>
                <div id="method-description" style="margin-top: 15px; padding: 15px; background: rgba(102, 126, 234, 0.1); border-radius: 8px; color: #495057;">
                    <strong>Commercial Yeast:</strong> Quick and reliable ‚Ä¢ 12-16 hours total time ‚Ä¢ Consistent results
                </div>
            </div>
            
            <div class="scaling-controls">
                <h3>Recipe Scaling</h3>
                <div class="scale-buttons">
                    <button class="scale-btn active" onclick="setScale(1)">1x (Original)</button>
                    <button class="scale-btn" onclick="setScale(2)">2x (Double)</button>
                    <button class="scale-btn" onclick="setScale(0.5)">¬Ωx (Half)</button>
                </div>
                <div class="slider-container">
                    <input type="range" min="0.25" max="4" value="1" step="0.25" class="slider" id="scaleSlider" oninput="setScaleFromSlider(this.value)">
                    <div class="scale-display" id="scaleDisplay">Scale: 1x</div>
                </div>
                
                <div class="hydration-controls" style="margin-top: 25px; padding-top: 20px; border-top: 2px solid #e9ecef;">
                    <h4 style="margin-bottom: 15px; color: #495057;">Dough Hydration</h4>
                    <div class="slider-container">
                        <input type="range" min="78" max="84" value="81" step="1" class="slider" id="hydrationSlider" oninput="setHydration(this.value)">
                        <div class="scale-display" id="hydrationDisplay">Hydration: 81% (Medium)</div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #6c757d; margin-top: 5px;">
                            <span>78% (Firmer)</span>
                            <span>84% (Softer)</span>
                        </div>
                    </div>
                </div>
                
                <div class="fermentation-controls" style="margin-top: 25px; padding-top: 20px; border-top: 2px solid #e9ecef;">
                    <h4 style="margin-bottom: 15px; color: #495057;">Cold Fermentation Time</h4>
                    <div class="slider-container">
                        <input type="range" min="12" max="72" value="16" step="4" class="slider" id="fermentationSlider" oninput="setFermentationTime(this.value)">
                        <div class="scale-display" id="fermentationDisplay">Fermentation: 16 hours (Standard)</div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.9em; color: #6c757d; margin-top: 5px;">
                            <span>12h (Quick)</span>
                            <span>72h (Extended)</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.85em; color: #6c757d; text-align: center;">
                            <span id="yeastAdjustment">Yeast will be adjusted automatically</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Equipment Needed</h2>
                <div class="equipment-grid">
                    <div class="equipment-card">
                        <h4>ü•£ Mixing</h4>
                        <p>Large mixing bowl, whisk, wooden spoon or dough scraper</p>
                    </div>
                    <div class="equipment-card">
                        <h4>üçû Baking</h4>
                        <p>Baking tray <span id="equipmentPan">(9x13 inch / 23x33 cm)</span>, parchment paper</p>
                    </div>
                    <div class="equipment-card">
                        <h4>üïê Storage</h4>
                        <p>Plastic wrap or damp towel for covering</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Ingredients</h2>
                <table class="ingredients-table">
                    <thead>
                        <tr>
                            <th>Ingredient</th>
                            <th>Weight</th>
                            <th>Baker's %</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>White Bread Flour</td>
                            <td class="weight" id="flour">500g</td>
                            <td>100%</td>
                        </tr>
                        <tr>
                            <td>Water</td>
                            <td class="weight" id="water">405g</td>
                            <td><span id="hydration-percent">81%</span></td>
                        </tr>
                        <tr>
                            <td>Extra Virgin Olive Oil</td>
                            <td class="weight" id="oil">54g</td>
                            <td>10.8%</td>
                        </tr>
                        <tr>
                            <td>Honey/Sugar/Agave</td>
                            <td class="weight" id="sweetener">5g</td>
                            <td>1%</td>
                        </tr>
                        <tr>
                            <td>Fine Sea Salt</td>
                            <td class="weight" id="salt">10g</td>
                            <td>2%</td>
                        </tr>
                        <tr id="leavening-row">
                            <td id="leavening-name">Instant Yeast</td>
                            <td class="weight" id="leavening-amount">4g</td>
                            <td id="leavening-percent">0.8%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="section" id="sourdough-section" style="display: none;">
                <h2>ü•ñ Sourdough Variation</h2>
                <div style="background: #e8f5e8; border: 2px solid #4caf50; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                    <h4 style="color: #2e7d32; margin-bottom: 15px;">Substitute Commercial Yeast with Sourdough Starter</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div>
                            <h5 style="color: #2e7d32; margin-bottom: 10px;">Ingredient Adjustments:</h5>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li><strong>Remove:</strong> <span id="yeast-remove">4g</span> instant yeast</li>
                                <li><strong>Add:</strong> <span id="starter-amount">70g</span> active sourdough starter (100% hydration)</li>
                                <li><strong>Reduce flour to:</strong> <span id="flour-sourdough">465g</span></li>
                                <li><strong>Reduce water to:</strong> <span id="water-sourdough">370g</span> (maintains hydration)</li>
                            </ul>
                        </div>
                        <div>
                            <h5 style="color: #2e7d32; margin-bottom: 10px;">Timing Adjustments:</h5>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li><strong>Feed starter:</strong> 4-8 hours before use</li>
                                <li><strong>Cold fermentation:</strong> 18-24 hours (longer)</li>
                                <li><strong>Final rise:</strong> 3-4 hours at room temp</li>
                                <li><strong>Bulk fermentation:</strong> Optional 30-60 min at room temp first</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="sourdough-steps" style="background: #f8f9fa; border-radius: 10px; padding: 20px; border-left: 5px solid #4caf50;">
                    <h4 style="color: #2e7d32; margin-bottom: 15px;">Modified Process for Sourdough Version:</h4>
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #2e7d32;">Step 1 - Starter Mixture:</strong>
                        <ol style="margin-left: 20px; margin-top: 8px;">
                            <li>Ensure your starter is active and passes the float test (a spoonful floats in water)</li>
                            <li>Mix <span id="water-sourdough-step">370g</span> warm water, <span id="oil-sourdough-step">15g</span> olive oil, <span id="sweetener-sourdough-step">5g</span> honey, and <span id="salt-sourdough-step">10g</span> salt</li>
                            <li>Add <span id="starter-sourdough-step">70g</span> active sourdough starter and whisk well</li>
                            <li>Let sit 10-15 minutes for starter to activate</li>
                        </ol>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <strong style="color: #2e7d32;">Step 2 - Add Flour:</strong>
                        <p style="margin-left: 20px; margin-top: 8px;">Add <span id="flour-sourdough-step">465g</span> flour and mix until incorporated. Continue with stretch and folds as in original recipe.</p>
                    </div>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <strong style="color: #856404;">üí° Pro Tips for Sourdough Focaccia:</strong>
                        <ul style="margin: 10px 0 0 20px; color: #856404;">
                            <li>The dough will be stickier than the yeast version - this is normal</li>
                            <li>Flavor develops more complexity with the longer fermentation</li>
                            <li>Final bread will have better keeping qualities</li>
                            <li>Watch for proper rise rather than strict timing - sourdough varies more</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Instructions</h2>
                <div class="steps">
                    <div class="step">
                        <h3>Prepare the Yeast Mixture</h3>
                        <div class="step-content">
                            <ol>
                                <li>In a large mixing bowl, combine <span id="water-step">390-420g</span> of warm water, <span id="oil-step1">15g</span> of extra virgin olive oil, <span id="sweetener-step">5g</span> of honey, sugar, or agave, <span id="salt-step">10g</span> of fine sea salt, and <span id="yeast-step">4g</span> of instant yeast.</li>
                                <li>Whisk these ingredients together until well dissolved. Let sit for about 5 minutes until bubbles form.</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="step">
                        <h3>Incorporate Flour and Rest</h3>
                        <div class="step-content">
                            <ol>
                                <li>Gradually add <span id="flour-step">500g</span> of white bread flour, mixing by hand until just incorporated. The dough will be quite wet and sticky.</li>
                                <li>Cover and let the dough rest for 10-15 minutes.</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="step">
                        <h3>Stretch and Fold the Dough</h3>
                        <div class="step-content">
                            <ol>
                                <li>Perform 2 to 3 sets of stretch and folds, resting the dough for 10 minutes between each set. With wet hands, grab one side of the dough, stretch it up, and fold it over to the opposite side.</li>
                                <li>After the final set, cover the dough again.</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="step">
                        <h3>Oil and Cold Fermentation</h3>
                        <div class="step-content">
                            <ol>
                                <li>Drizzle the remaining <span id="oil-step2">39g</span> of extra virgin olive oil over the dough, turning it to coat evenly.</li>
                                <li>Cover tightly and ferment in the refrigerator at <span class="temperature">4¬∞C (39¬∞F)</span> for <span id="fermentation-time">12-16 hours</span>.</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="step">
                        <h3>Prepare for Baking</h3>
                        <div class="step-content">
                            <ol>
                                <li>Line a <span id="pan-step">9x13 inch (23x33 cm)</span> baking tray with parchment paper and drizzle with olive oil.</li>
                                <li>Turn the dough out onto the tray and gently shape it to fit the pan.</li>
                                <li>Cover and let rest at room temperature for approximately <span id="final-rise-time">2 hours</span>, until puffy and nearly doubled.</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="step">
                        <h3>Final Preparation and Baking</h3>
                        <div class="step-content">
                            <ol>
                                <li>Preheat your oven to <span class="temperature">220¬∞C (425¬∞F)</span>.</li>
                                <li>With oiled fingers, create deep dimples all over the surface of the dough, pressing almost to the bottom of the pan.</li>
                                <li>Drizzle with additional olive oil and sprinkle with coarse sea salt and your choice of toppings.</li>
                                <li>Bake for <strong>20-25 minutes</strong> until golden brown and crispy on top.</li>
                                <li>Let cool for 5-10 minutes before cutting and serving.</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Traditional Toppings</h2>
                <p>Choose one or combine several for authentic Italian flavor:</p>
                <div class="toppings-grid">
                    <div class="topping-item">
                        <strong>üßÇ Classic</strong>
                        Coarse sea salt & fresh rosemary
                    </div>
                    <div class="topping-item">
                        <strong>ü´í Olive</strong>
                        Kalamata or green olives, halved
                    </div>
                    <div class="topping-item">
                        <strong>üßÑ Garlic</strong>
                        Thinly sliced garlic cloves
                    </div>
                    <div class="topping-item">
                        <strong>üçÖ Tomato</strong>
                        Cherry tomatoes, halved
                    </div>
                    <div class="topping-item">
                        <strong>üßÖ Onion</strong>
                        Caramelized red onions
                    </div>
                    <div class="topping-item">
                        <strong>üåø Herbs</strong>
                        Fresh thyme, oregano, or sage
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>Pro Tips & Storage</h2>
                <div class="tips-list">
                    <h4>Success Tips</h4>
                    <ul>
                        <li id="tip-1">Use warm (not hot) water around 38¬∞C (100¬∞F) to activate yeast properly</li>
                        <li>Don't skip the cold fermentation - it develops the best flavor and texture</li>
                        <li>Oil your hands when handling the sticky dough to prevent sticking</li>
                        <li>Be generous with olive oil - it creates the signature crispy crust</li>
                        <li>Make dimples deep enough to hold toppings and create texture</li>
                        <li>Let the bread cool slightly before cutting to avoid a gummy texture</li>
                        <li id="tip-extra" style="display: none;">The dough will be stickier with sourdough starter - this is normal and creates better texture</li>
                    </ul>
                </div>
                
                <div class="troubleshooting">
                    <h4>Troubleshooting</h4>
                    <div class="problem">
                        <strong>Dense, heavy bread:</strong> Yeast may be expired or water was too hot. Ensure proper fermentation times.
                    </div>
                    <div class="problem">
                        <strong>Not rising properly:</strong> Check yeast freshness, room temperature should be 21-24¬∞C (70-75¬∞F) for final rise.
                    </div>
                    <div class="problem">
                        <strong>Too salty:</strong> Reduce salt slightly or ensure even distribution in the dough.
                    </div>
                    <div class="problem">
                        <strong>Burning on bottom:</strong> Use parchment paper and consider lowering oven rack position.
                    </div>
                </div>
                
                <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 10px; padding: 20px; margin-top: 20px;">
                    <h4 style="color: #155724; margin-bottom: 10px;">üçû Storage Instructions</h4>
                    <p><strong>Room Temperature:</strong> Store covered for up to 2 days. Reheat in 175¬∞C (350¬∞F) oven for 5-8 minutes to refresh.</p>
                    <p><strong>Freezing:</strong> Wrap tightly and freeze for up to 3 months. Thaw at room temperature and reheat before serving.</p>
                    <p><strong>Best Fresh:</strong> Focaccia is best enjoyed within 24 hours of baking for optimal texture.</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentScale = 1;
        let currentHydration = 81; // Default to middle of range (78-84%)
        let yeastType = 'commercial'; // 'commercial' or 'sourdough'
        let currentFermentationHours = 16; // Default fermentation time
        
        const baseAmounts = {
            flour: 500,
            oil: 54,
            sweetener: 5,
            salt: 10,
            yeast: 4,
            starter: 70,
            oilStep1: 15,
            oilStep2: 39
        };
        
        function setYeastType(type) {
            yeastType = type;
            updateYeastButtons();
            updateRecipe();
            updateFermentationDisplay();
        }
        
        function updateYeastButtons() {
            const commercialBtn = document.getElementById('commercial-yeast-btn');
            const sourdoughBtn = document.getElementById('sourdough-btn');
            const description = document.getElementById('method-description');
            const sourdoughSection = document.getElementById('sourdough-section');
            
            if (commercialBtn && sourdoughBtn && description) {
                if (yeastType === 'commercial') {
                    commercialBtn.style.background = '#667eea';
                    commercialBtn.style.color = 'white';
                    sourdoughBtn.style.background = 'white';
                    sourdoughBtn.style.color = '#4caf50';
                    description.innerHTML = '<strong>Commercial Yeast:</strong> Quick and reliable ‚Ä¢ 12-16 hours total time ‚Ä¢ Consistent results';
                    description.style.background = 'rgba(102, 126, 234, 0.1)';
                    if (sourdoughSection) sourdoughSection.style.display = 'none';
                } else {
                    commercialBtn.style.background = 'white';
                    commercialBtn.style.color = '#667eea';
                    sourdoughBtn.style.background = '#4caf50';
                    sourdoughBtn.style.color = 'white';
                    description.innerHTML = '<strong>Sourdough Starter:</strong> Complex flavor ‚Ä¢ 18-24 hours total time ‚Ä¢ Artisan texture ‚Ä¢ Better keeping qualities';
                    description.style.background = 'rgba(76, 175, 80, 0.1)';
                    if (sourdoughSection) sourdoughSection.style.display = 'block';
                }
            }
        }
        
        function setScale(scale) {
            currentScale = scale;
            updateRecipe();
            updateButtons();
            updateSlider();
        }
        
        function setScaleFromSlider(scale) {
            currentScale = parseFloat(scale);
            updateRecipe();
            updateButtons();
            const scaleDisplay = document.getElementById('scaleDisplay');
            if (scaleDisplay) {
                scaleDisplay.textContent = `Scale: ${scale}x`;
            }
        }
        
        function setHydration(hydration) {
            currentHydration = parseInt(hydration);
            updateRecipe();
            updateHydrationDisplay();
        }
        
        function setFermentationTime(hours) {
            currentFermentationHours = parseInt(hours);
            updateRecipe();
            updateFermentationDisplay();
        }
        
        function calculateYeastAmount() {
            // Base yeast amount for 16-hour fermentation is 4g (0.8%)
            // Use exponential decay formula: yeast = base * (0.5)^((time-16)/16)
            // This roughly halves yeast for each 16-hour increase
            const baseYeast = 4;
            const exponent = (currentFermentationHours - 16) / 16;
            return baseYeast * Math.pow(0.5, exponent);
        }
        
        function calculateStarterAmount() {
            // Base starter amount for 20-hour fermentation is 70g (14%)
            // Adjust based on fermentation time
            const baseStarter = 70;
            const exponent = (currentFermentationHours - 20) / 20;
            return baseStarter * Math.pow(0.6, exponent); // Slower reduction for starter
        }
        
        function updateHydrationDisplay() {
            let texture = "";
            if (currentHydration <= 79) {
                texture = " (Firmer)";
            } else if (currentHydration >= 83) {
                texture = " (Softer)";
            } else {
                texture = " (Medium)";
            }
            const hydrationDisplay = document.getElementById('hydrationDisplay');
            if (hydrationDisplay) {
                hydrationDisplay.textContent = `Hydration: ${currentHydration}%${texture}`;
            }
        }
        
        function updateFermentationDisplay() {
            let description = "";
            if (currentFermentationHours <= 16) {
                description = " (Quick)";
            } else if (currentFermentationHours <= 24) {
                description = " (Standard)";
            } else if (currentFermentationHours <= 48) {
                description = " (Extended)";
            } else {
                description = " (Very Extended)";
            }
            
            const fermentationDisplay = document.getElementById('fermentationDisplay');
            if (fermentationDisplay) {
                fermentationDisplay.textContent = `Fermentation: ${currentFermentationHours} hours${description}`;
            }
            
            // Update yeast adjustment note
            const yeastAdjustment = document.getElementById('yeastAdjustment');
            if (yeastAdjustment) {
                if (yeastType === 'commercial') {
                    const yeastAmount = calculateYeastAmount() * currentScale;
                    const yeastPercent = (yeastAmount / (baseAmounts.flour * currentScale)) * 100;
                    yeastAdjustment.textContent = `Yeast adjusted to ${yeastAmount.toFixed(1)}g (${yeastPercent.toFixed(2)}%)`;
                } else {
                    const starterAmount = calculateStarterAmount() * currentScale;
                    const starterPercent = (starterAmount / (baseAmounts.flour * currentScale)) * 100;
                    yeastAdjustment.textContent = `Starter adjusted to ${Math.round(starterAmount)}g (${starterPercent.toFixed(0)}%)`;
                }
            }
        }
        
        function calculateWaterAmount() {
            let flourAmount;
            if (yeastType === 'sourdough') {
                // For sourdough, reduce flour by half the starter amount
                const starterAmount = baseAmounts.starter * currentScale;
                flourAmount = (baseAmounts.flour * currentScale) - (starterAmount / 2);
            } else {
                flourAmount = baseAmounts.flour * currentScale;
            }
            
            const totalWater = (flourAmount * currentHydration) / 100;
            
            if (yeastType === 'sourdough') {
                // Subtract water from starter
                const starterAmount = baseAmounts.starter * currentScale;
                return Math.round(totalWater - (starterAmount / 2));
            }
            
            return Math.round(totalWater);
        }
        
        function calculateSourdoughAmounts() {
            const starterAmount = Math.round(calculateStarterAmount() * currentScale);
            const flourReduction = Math.round(starterAmount / 2);
            const adjustedFlour = Math.round(baseAmounts.flour * currentScale) - flourReduction;
            
            return {
                starter: starterAmount,
                flour: adjustedFlour
            };
        }
        
        
        function updateRecipe() {
            const waterAmount = calculateWaterAmount();
            
            // Helper function to safely update elements
            function safeUpdate(id, content, useInnerHTML = false) {
                const element = document.getElementById(id);
                if (element) {
                    if (useInnerHTML) {
                        element.innerHTML = content;
                    } else {
                        element.textContent = content;
                    }
                } else {
                    console.warn(`Element with ID '${id}' not found`);
                }
            }
            
            // Update timing based on yeast type and fermentation time
            const totalTime = currentFermentationHours + (yeastType === 'commercial' ? 3 : 4);
            const totalTimeRange = `${totalTime - 1}-${totalTime + 1} hours`;
            safeUpdate('total-time', totalTimeRange);
            safeUpdate('fermentation-time', `${currentFermentationHours} hours`);
            safeUpdate('final-rise-time', yeastType === 'commercial' ? '2-3 hours' : '3-4 hours');
            
            // Update ingredients table
            if (yeastType === 'commercial') {
                const yeastAmount = calculateYeastAmount() * currentScale;
                const yeastPercent = (yeastAmount / (baseAmounts.flour * currentScale)) * 100;
                safeUpdate('flour', Math.round(baseAmounts.flour * currentScale) + 'g');
                safeUpdate('leavening-name', 'Instant Yeast');
                safeUpdate('leavening-amount', yeastAmount.toFixed(1) + 'g');
                safeUpdate('leavening-percent', yeastPercent.toFixed(2) + '%');
            } else {
                const sourdoughAmounts = calculateSourdoughAmounts();
                const starterPercent = (sourdoughAmounts.starter / (baseAmounts.flour * currentScale)) * 100;
                safeUpdate('flour', sourdoughAmounts.flour + 'g');
                safeUpdate('leavening-name', 'Sourdough Starter');
                safeUpdate('leavening-amount', sourdoughAmounts.starter + 'g');
                safeUpdate('leavening-percent', starterPercent.toFixed(0) + '%');
            }
            
            safeUpdate('water', waterAmount + 'g');
            safeUpdate('hydration-percent', currentHydration + '%');
            safeUpdate('oil', Math.round(baseAmounts.oil * currentScale) + 'g');
            safeUpdate('sweetener', Math.round(baseAmounts.sweetener * currentScale) + 'g');
            safeUpdate('salt', Math.round(baseAmounts.salt * currentScale) + 'g');
            
            // Update instructions
            safeUpdate('water-step', waterAmount + 'g');
            safeUpdate('oil-step1', Math.round(baseAmounts.oilStep1 * currentScale) + 'g');
            safeUpdate('sweetener-step', Math.round(baseAmounts.sweetener * currentScale) + 'g');
            safeUpdate('salt-step', Math.round(baseAmounts.salt * currentScale) + 'g');
            safeUpdate('oil-step2', Math.round(baseAmounts.oilStep2 * currentScale) + 'g');
            
            // Update Step 1 based on yeast type
            if (yeastType === 'commercial') {
                const yeastAmount = calculateYeastAmount() * currentScale;
                safeUpdate('yeast-step', yeastAmount.toFixed(1) + 'g');
                safeUpdate('flour-step', Math.round(baseAmounts.flour * currentScale) + 'g');
            } else {
                const sourdoughAmounts = calculateSourdoughAmounts();
                safeUpdate('yeast-step', sourdoughAmounts.starter + 'g');
                safeUpdate('flour-step', sourdoughAmounts.flour + 'g');
            }
            
            // Update yield and pan size
            if (currentScale === 0.5) {
                safeUpdate('yield', "4-5 pieces");
                safeUpdate('panSize', "8x8 inch (20x20 cm)");
                safeUpdate('equipmentPan', "(8x8 inch / 20x20 cm)");
                safeUpdate('pan-step', "8x8 inch (20x20 cm)");
            } else if (currentScale === 2) {
                safeUpdate('yield', "16-20 pieces");
                safeUpdate('panSize', "Two 9x13 inch (23x33 cm) pans");
                safeUpdate('equipmentPan', "(Two 9x13 inch / 23x33 cm pans)");
                safeUpdate('pan-step', "two 9x13 inch (23x33 cm)");
            } else if (currentScale < 1) {
                safeUpdate('yield', Math.round(8 * currentScale) + "-" + Math.round(10 * currentScale) + " pieces");
                safeUpdate('panSize', "8x8 inch (20x20 cm)");
                safeUpdate('equipmentPan', "(8x8 inch / 20x20 cm)");
                safeUpdate('pan-step', "8x8 inch (20x20 cm)");
            } else if (currentScale > 2) {
                safeUpdate('yield', Math.round(8 * currentScale) + "-" + Math.round(10 * currentScale) + " pieces");
                safeUpdate('panSize', "Multiple pans or extra large sheet pan");
                safeUpdate('equipmentPan', "(Multiple pans needed)");
                safeUpdate('pan-step', "appropriately sized");
            } else {
                safeUpdate('yield', Math.round(8 * currentScale) + "-" + Math.round(10 * currentScale) + " pieces");
                safeUpdate('panSize', "9x13 inch (23x33 cm)");
                safeUpdate('equipmentPan', "(9x13 inch / 23x33 cm)");
                safeUpdate('pan-step', "9x13 inch (23x33 cm)");
            }
            
            safeUpdate('scaleDisplay', `Scale: ${currentScale}x`);
            updateHydrationDisplay();
            
            // Update tips based on yeast type
            if (yeastType === 'commercial') {
                safeUpdate('tip-1', 'Use warm (not hot) water around 38¬∞C (100¬∞F) to activate yeast properly');
                const tipExtra = document.getElementById('tip-extra');
                if (tipExtra) tipExtra.style.display = 'none';
            } else {
                safeUpdate('tip-1', 'Ensure your sourdough starter is active and well-fed 4-8 hours before use');
                const tipExtra = document.getElementById('tip-extra');
                if (tipExtra) tipExtra.style.display = 'list-item';
            }
            
            // Update sourdough variation section
            const sourdoughAmounts = calculateSourdoughAmounts();
            const yeastAmount = calculateYeastAmount() * currentScale;
            safeUpdate('yeast-remove', yeastAmount.toFixed(1) + 'g');
            safeUpdate('starter-amount', sourdoughAmounts.starter + 'g');
            safeUpdate('flour-sourdough', sourdoughAmounts.flour + 'g');
            safeUpdate('water-sourdough', waterAmount + 'g');
            
            // Update sourdough steps
            safeUpdate('water-sourdough-step', waterAmount + 'g');
            safeUpdate('oil-sourdough-step', Math.round(baseAmounts.oilStep1 * currentScale) + 'g');
            safeUpdate('sweetener-sourdough-step', Math.round(baseAmounts.sweetener * currentScale) + 'g');
            safeUpdate('salt-sourdough-step', Math.round(baseAmounts.salt * currentScale) + 'g');
            safeUpdate('starter-sourdough-step', sourdoughAmounts.starter + 'g');
            safeUpdate('flour-sourdough-step', sourdoughAmounts.flour + 'g');
        }
        
        function updateButtons() {
            const buttons = document.querySelectorAll('.scale-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (currentScale === 1 && buttons[0]) {
                buttons[0].classList.add('active');
            } else if (currentScale === 2 && buttons[1]) {
                buttons[1].classList.add('active');
            } else if (currentScale === 0.5 && buttons[2]) {
                buttons[2].classList.add('active');
            }
        }
        
        function updateSlider() {
            const scaleSlider = document.getElementById('scaleSlider');
            if (scaleSlider) {
                scaleSlider.value = currentScale;
            }
        }
        
        // Initialize the recipe when page loads
        function initializeRecipe() {
            try {
                updateYeastButtons();
                updateRecipe();
                updateFermentationDisplay();
            } catch (error) {
                console.error('Initialization error:', error);
                // Retry after a short delay
                setTimeout(initializeRecipe, 100);
            }
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeRecipe);
        } else {
            initializeRecipe();
        }
    </script>
</body>
</html>